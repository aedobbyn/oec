<!doctype html>
  <meta charset="utf-8">
    <script src="d3plus/d3.min.js"></script>
    <script src="d3plus/d3plus.min.js"></script>
          <div id="tree_map"></div>
          <script>
          var visualization = d3plus.viz()
          .container("#tree_map")
          .data("json_file")
          .type("tree_map")
          .width(1000)
          .height(600)
          .resize(true)
          .id(["group","product"])
          .size("variablecol")
          .font({"family": "Lato"})
          .labels({"align": "left", "valign": "top"})
          .depth(1)
          .format({
            "text": function(text, params) {
              if (text === "variablecol") {
                return "variablename";
              }
              if (text === "product_id") {
                return "code_display";
              }
              if (text === "rca") {
                return "RCA";
              }
              else {
                return d3plus.string.title(text, params);
              }
            },
            "number": function(number, params) {
              var formatted = d3plus.number.format(number, params);
              if (params.key === "variablecol") {
                return formatted + " USD";
              }
              if (params.key === "product_id") {
                return d3.round(number,0);
              }
              if (params.key === "rca") {
                return d3.round(number,2);
              }
              else {
                return formatted;
              }
            }
          })
          .color("color")
          .title({
            "total": {
            "font": {"size": 16},
            "value": true
            },
            "sub": {"font": {"size": 16}}
           })
          .legend({"order": {"sort": "desc", "value": "size"}})
          .tooltip(["product_id","variablecol","rca"])
          .icon({"style": "knockout", "value": "image"})
          .draw()
          </script>
<link href="https://fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet" type="text/css">
